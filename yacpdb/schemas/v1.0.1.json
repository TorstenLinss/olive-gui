{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://www.yacpdb.org/schemas/v1.0.1.json",
  "type": "object",
  "properties": {
    "authors": { "type": "array", "items": { "$ref": "#/definitions/author_name" } },
    "source": { "type": "string", "minLength": 1, "maxLength": 255 },
    "source-id": { "type": "string", "pattern": "^[^/]+(/[^/]*)?$", "maxLength": 255 },
    "date": {
      "anyOf": [
        { "type": "integer", "minimum": 1300 },
        { "type": "string", "pattern": "^[0-9]{4}(-[0-9]{2})?(-[0-9]{2})?$" }
      ]
    },
    "distinction" : {
      "type": "string",
      "pattern": "^(?i)(((Special)|([0-9]*1st)|([0-9]*2nd)|([0-9]*3rd)|([0-9]*[0456789]th)|([0-9]*1[123]th))(-(([0-9]*1st)|([0-9]*2nd)|([0-9]*3rd)|([0-9]*[0456789]th)|([0-9]*1[123]th)))? )?(Special )?((Prize)|(Place)|(HM)|(Honorable Mention)|(Commendation)|(Comm\\.)|(cm))(, .*)?$"
    },
    "stipulation": { "type": "string", "minLength": 1 },
    "algebraic" : {
      "type": "object",
      "properties" : {
        "white" : { "$ref": "#/definitions/piece_decl_list" },
        "black" : { "$ref": "#/definitions/piece_decl_list" },
        "neutral" : { "$ref": "#/definitions/piece_decl_list" }
      },
      "additionalProperties": false
    },
    "twins" : {
      "type": "object",
      "propertyNames": { "pattern": "^([a-z]|(z[0-9]+))$" },
      "additionalProperties": { "type": "string", "minLength": 1 }
    },
    "intended-solutions": {
      "anyOf": [
        { "type": "integer", "minimum": 2 },
        { "type": "string", "pattern": "^[0-9]+(\\.[0-9]+)*(\\.\\.\\.)?$" }
      ]
    },
    "solution": { "type": "string", "minLength": 1 },
    "options": { "type": "array", "items": { "type": "string", "minLength": 1, "maxLength": 255 } },
    "keywords": { "type": "array", "items": { "type": "string", "minLength": 1, "maxLength": 255 } },
    "comments": { "type": "array", "items": { "type": "string", "minLength": 1 } }
  },
  "required": ["stipulation", "algebraic"],
  "additionalProperties": false,

  "definitions": {
    "author_name": { "type": "string", "pattern": "^[^,]+, [^,]+$", "maxLength": 255 },
    "piece_decl": {
      "type": "string",
      "pattern": "^((Chameleon|Jigger|Kamikaze|Paralysing|Royal|Volage|Functionary|HalfNeutral|HurdleColourChanging|Protean|Magic|Uncapturable) )*[A-Z0-9]{1,2}[a-h][1-8]$"
    },
    "piece_decl_list": { "type": "array", "items": {"$ref": "#/definitions/piece_decl"}, "minItems": 1 }
  }
}